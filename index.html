<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apple Insights | Next-Gen Tech Analysis</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Geist:wght@100;200;300;400;500;600;700;800;900&family=JetBrains+Mono:wght@300;400;500&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        :root {
            --primary-light: #000000;
            --primary-dark: #ffffff;
            --secondary-light: #6b7280;
            --secondary-dark: #9ca3af;
            --bg-light: #ffffff;
            --bg-dark: #0a0a0a;
            --surface-light: #f8fafc;
            --surface-dark: #111111;
            --card-light: rgba(255, 255, 255, 0.8);
            --card-dark: rgba(17, 17, 17, 0.8);
            --accent: #0066ff;
            --accent-secondary: #ff3366;
            --accent-tertiary: #00d4aa;
            --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-secondary: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --gradient-tertiary: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --shadow-light: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            --shadow-dark: 0 25px 50px -12px rgba(0, 0, 0, 0.6);
            --blur-sm: blur(8px);
            --blur-md: blur(16px);
            --blur-lg: blur(24px);
        }

        [data-theme="dark"] {
            --primary: var(--primary-dark);
            --secondary: var(--secondary-dark);
            --bg: var(--bg-dark);
            --surface: var(--surface-dark);
            --card: var(--card-dark);
            --shadow: var(--shadow-dark);
        }

        [data-theme="light"] {
            --primary: var(--primary-light);
            --secondary: var(--secondary-light);
            --bg: var(--bg-light);
            --surface: var(--surface-light);
            --card: var(--card-light);
            --shadow: var(--shadow-light);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            font-size: 16px;
            scroll-behavior: smooth;
            overflow-x: hidden;
        }

        body {
            font-family: 'Geist', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg);
            color: var(--primary);
            overflow-x: hidden;
            line-height: 1.6;
            transition: all 0.6s cubic-bezier(0.23, 1, 0.32, 1);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            opacity: 0;
        }

        /* Ultra Modern Cursor - only for desktop */
        @media (min-width: 769px) {
            .cursor {
                position: fixed;
                width: 6px;
                height: 6px;
                border-radius: 50%;
                background: var(--accent);
                pointer-events: none;
                z-index: 9999;
                transform: translate(-50%, -50%);
                transition: all 0.2s cubic-bezier(0.23, 1, 0.32, 1);
                mix-blend-mode: difference;
            }

            .cursor-trail {
                position: fixed;
                width: 32px;
                height: 32px;
                border: 1px solid var(--accent);
                border-radius: 50%;
                pointer-events: none;
                z-index: 9998;
                transform: translate(-50%, -50%);
                transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
                backdrop-filter: var(--blur-sm);
                opacity: 0.7;
            }

            .cursor.active {
                width: 48px;
                height: 48px;
                background: radial-gradient(circle, var(--accent) 0%, transparent 70%);
            }

            .cursor-trail.active {
                width: 64px;
                height: 64px;
                background: var(--glass-bg);
                border: 2px solid var(--accent);
            }
        }

        /* Mobile cursor hidden */
        @media (max-width: 768px) {
            .cursor, .cursor-trail {
                display: none !important;
            }
        }

        /* Animated Background */
        .animated-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            opacity: 0.03;
            background:
                    radial-gradient(circle at 25% 25%, var(--accent) 0%, transparent 50%),
                    radial-gradient(circle at 75% 75%, var(--accent-secondary) 0%, transparent 50%),
                    radial-gradient(circle at 75% 25%, var(--accent-tertiary) 0%, transparent 50%),
                    radial-gradient(circle at 25% 75%, var(--accent) 0%, transparent 50%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 0%, 100% 100%, 100% 0%, 0% 100%; }
            25% { background-position: 100% 0%, 0% 100%, 0% 0%, 100% 100%; }
            50% { background-position: 100% 100%, 0% 0%, 0% 100%, 100% 0%; }
            75% { background-position: 0% 100%, 100% 0%, 100% 100%, 0% 0%; }
        }

        /* Floating Orbs - hidden on mobile */
        .floating-orbs {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
        }

        @media (min-width: 769px) {
            .orb {
                position: absolute;
                border-radius: 50%;
                background: radial-gradient(circle, var(--accent-tertiary) 0%, transparent 70%);
                opacity: 0.1;
                animation: float 20s ease-in-out infinite;
            }

            .orb:nth-child(1) {
                width: 200px;
                height: 200px;
                top: 20%;
                left: 10%;
                animation-delay: 0s;
            }

            .orb:nth-child(2) {
                width: 150px;
                height: 150px;
                top: 60%;
                right: 15%;
                animation-delay: -7s;
            }

            .orb:nth-child(3) {
                width: 300px;
                height: 300px;
                bottom: 10%;
                left: 50%;
                animation-delay: -14s;
            }
        }

        @media (max-width: 768px) {
            .orb {
                display: none;
            }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            33% { transform: translateY(-30px) rotate(120deg); }
            66% { transform: translateY(15px) rotate(240deg); }
        }

        /* Next-Gen Preloader */
        .preloader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: linear-gradient(45deg, var(--bg), var(--surface));
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            transition: all 1s cubic-bezier(0.23, 1, 0.32, 1);
        }

        #preloader-3d {
            width: 150px;
            height: 150px;
            margin-bottom: 2rem;
        }

        .preloader-text {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            font-weight: 300;
            letter-spacing: 0.3em;
            text-transform: uppercase;
            opacity: 0;
            transform: translateY(20px);
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .loading-progress {
            width: 200px;
            height: 2px;
            background: var(--glass-bg);
            border-radius: 1px;
            margin-top: 1rem;
            overflow: hidden;
        }

        .loading-bar {
            width: 0%;
            height: 100%;
            background: var(--gradient-primary);
            border-radius: 1px;
            transition: width 0.3s ease;
        }

        /* Glassmorphism Header */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            padding: 1.5rem 2rem;
            background: var(--glass-bg);
            backdrop-filter: var(--blur-lg);
            -webkit-backdrop-filter: var(--blur-lg);
            border-bottom: 1px solid var(--glass-border);
            z-index: 1000;
            transition: all 0.6s cubic-bezier(0.23, 1, 0.32, 1);
            transform: translateY(-100%);
        }

        .header.visible {
            transform: translateY(0);
        }

        .nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1600px;
            margin: 0 auto;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 200;
            letter-spacing: -0.02em;
            position: relative;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .logo::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--gradient-primary);
            transition: width 0.6s cubic-bezier(0.23, 1, 0.32, 1);
        }

        .logo:hover::after {
            width: 100%;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2.5rem;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--primary);
            font-weight: 300;
            font-size: 0.875rem;
            letter-spacing: 0.02em;
            position: relative;
            transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
            opacity: 0.8;
        }

        .nav-links a:hover {
            opacity: 1;
            transform: translateY(-2px);
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 50%;
            width: 0;
            height: 2px;
            background: var(--accent);
            transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
            transform: translateX(-50%);
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        .theme-toggle {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 50px;
            padding: 0.5rem 1rem;
            color: var(--primary);
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            backdrop-filter: var(--blur-sm);
            font-family: 'JetBrains Mono', monospace;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .theme-toggle:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
            background: var(--accent);
            color: white;
        }

        /* Mobile menu button */
        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            color: var(--primary);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
        }

        /* Hero Section - Ultra Modern */
        .hero {
            min-height: 100vh;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 0 2rem;
            position: relative;
            overflow: hidden;
        }

        .hero-content {
            z-index: 1;
            max-width: 1000px;
            width: 100%;
        }

        .hero-content h1 {
            font-size: clamp(3rem, 12vw, 12rem);
            font-weight: 100;
            letter-spacing: -0.05em;
            line-height: 0.85;
            opacity: 0;
            transform: translateY(100px);
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 50%, var(--accent-secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 2rem;
        }

        .hero-subtitle {
            font-size: clamp(1.2rem, 3vw, 2rem);
            font-weight: 200;
            opacity: 0;
            transform: translateY(50px);
            margin-bottom: 3rem;
            background: var(--gradient-secondary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero-description {
            font-size: clamp(1rem, 2vw, 1.25rem);
            font-weight: 300;
            color: var(--secondary);
            max-width: 600px;
            margin: 0 auto 3rem;
            opacity: 0;
            transform: translateY(30px);
        }

        .hero-cta {
            display: flex;
            gap: 1rem;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transform: translateY(30px);
            flex-wrap: wrap;
        }

        .cta-primary, .cta-secondary {
            padding: 1rem 2rem;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 400;
            font-size: 0.875rem;
            letter-spacing: 0.02em;
            transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
            position: relative;
            overflow: hidden;
            min-width: 150px;
            text-align: center;
        }

        .cta-primary {
            background: var(--accent);
            color: white;
            border: 2px solid var(--accent);
        }

        .cta-secondary {
            background: transparent;
            color: var(--primary);
            border: 2px solid var(--glass-border);
            backdrop-filter: var(--blur-sm);
        }

        .cta-primary:hover, .cta-secondary:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow);
        }

        .cta-primary:hover {
            background: var(--accent-secondary);
            border-color: var(--accent-secondary);
        }

        .cta-secondary:hover {
            background: var(--glass-bg);
            border-color: var(--accent);
        }

        .scroll-indicator {
            position: absolute;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            animation: bounce 2s infinite;
        }

        .scroll-indicator::after {
            content: '';
            display: block;
            width: 1px;
            height: 80px;
            background: linear-gradient(to bottom, var(--accent), transparent);
            margin: 0.5rem auto 0;
            animation: scrollPulse 2s ease-in-out infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateX(-50%) translateY(0); }
            40% { transform: translateX(-50%) translateY(-10px); }
            60% { transform: translateX(-50%) translateY(-5px); }
        }

        @keyframes scrollPulse {
            0% { opacity: 0; transform: scaleY(0); }
            50% { opacity: 1; transform: scaleY(1); }
            100% { opacity: 0; transform: scaleY(0); }
        }

        /* Ultra Modern Section Styling */
        .content-section {
            padding: 10rem 2rem;
            max-width: 1600px;
            margin: 0 auto;
            opacity: 0;
            transform: translateY(50px);
        }

        .section-header {
            text-align: center;
            margin-bottom: 6rem;
        }

        .section-title {
            font-size: clamp(2.5rem, 6vw, 5rem);
            font-weight: 100;
            letter-spacing: -0.03em;
            margin-bottom: 2rem;
            position: relative;
            display: inline-block;
            background: var(--gradient-tertiary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .section-subtitle {
            font-size: clamp(1rem, 2vw, 1.5rem);
            font-weight: 200;
            color: var(--secondary);
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.8;
        }

        /* Next-Gen News Grid */
        .news-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-top: 4rem;
        }

        .news-card {
            background: var(--card);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 2.5rem;
            position: relative;
            overflow: hidden;
            transition: all 0.6s cubic-bezier(0.23, 1, 0.32, 1);
            backdrop-filter: var(--blur-md);
            box-shadow: var(--shadow);
        }

        .news-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--gradient-primary);
            opacity: 0;
            transition: opacity 0.6s cubic-bezier(0.23, 1, 0.32, 1);
            z-index: -1;
        }

        .news-card:hover {
            transform: translateY(-12px) scale(1.02);
            border-color: var(--accent);
        }

        .news-card:hover::before {
            opacity: 0.1;
        }

        .news-meta {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            font-weight: 400;
            color: var(--accent);
            text-transform: uppercase;
            letter-spacing: 0.15em;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .news-meta::before {
            content: '';
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--accent);
            flex-shrink: 0;
        }

        .news-card h3 {
            font-size: 1.5rem;
            font-weight: 300;
            line-height: 1.3;
            margin-bottom: 1.5rem;
            letter-spacing: -0.02em;
            color: var(--primary);
        }

        .news-card p {
            font-size: 1rem;
            font-weight: 300;
            color: var(--secondary);
            line-height: 1.7;
            margin-bottom: 2rem;
        }

        .read-more {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            background: transparent;
            color: var(--accent);
            text-decoration: none;
            font-size: 0.875rem;
            font-weight: 400;
            border: 2px solid var(--accent);
            border-radius: 50px;
            transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
            position: relative;
            overflow: hidden;
        }

        .read-more::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--accent);
            transform: translateX(-100%);
            transition: transform 0.4s cubic-bezier(0.23, 1, 0.32, 1);
            z-index: -1;
        }

        .read-more:hover {
            color: white;
            transform: translateX(4px);
        }

        .read-more:hover::before {
            transform: translateX(0);
        }

        .read-more::after {
            content: '→';
            transition: transform 0.3s ease;
        }

        .read-more:hover::after {
            transform: translateX(4px);
        }

        /* Featured Article with 3D Effect */
        .featured-article {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            margin-bottom: 6rem;
            align-items: center;
            opacity: 0;
            transform: translateY(50px);
        }

        .featured-image {
            position: relative;
            padding-bottom: 60%;
            overflow: hidden;
            border-radius: 24px;
            transform-style: preserve-3d;
            perspective: 1000px;
        }

        .featured-image::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--gradient-primary);
            opacity: 0;
            transition: opacity 0.6s ease;
            z-index: 1;
            border-radius: 24px;
        }

        .featured-image img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.8s cubic-bezier(0.23, 1, 0.32, 1);
            border-radius: 24px;
        }

        .featured-article:hover .featured-image img {
            transform: scale(1.1);
        }

        .featured-article:hover .featured-image::before {
            opacity: 0.3;
        }

        .featured-content {
            padding-left: 2rem;
        }

        .featured-content h3 {
            font-size: clamp(1.8rem, 4vw, 3rem);
            font-weight: 200;
            line-height: 1.2;
            margin-bottom: 2rem;
            letter-spacing: -0.02em;
            background: var(--gradient-secondary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .featured-content p {
            font-size: 1.2rem;
            font-weight: 300;
            color: var(--secondary);
            margin-bottom: 2.5rem;
            line-height: 1.7;
        }

        /* Modern Stats Section */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-top: 4rem;
        }

        .stat-card {
            text-align: center;
            padding: 3rem 2rem;
            background: var(--card);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            transition: all 0.6s cubic-bezier(0.23, 1, 0.32, 1);
            backdrop-filter: var(--blur-md);
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--gradient-tertiary);
            opacity: 0;
            transition: opacity 0.6s ease;
        }

        .stat-card:hover {
            transform: translateY(-8px);
            border-color: var(--accent-tertiary);
        }

        .stat-card:hover::before {
            opacity: 0.1;
        }

        .stat-number {
            font-size: 4rem;
            font-weight: 100;
            background: var(--gradient-tertiary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
            line-height: 1;
        }

        .stat-label {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            font-weight: 300;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            color: var(--secondary);
        }

        /* Modern Loading States */
        .loading {
            text-align: center;
            padding: 6rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2rem;
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 2px solid var(--glass-border);
            border-top: 2px solid var(--accent);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        .loading-text {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.875rem;
            color: var(--secondary);
            letter-spacing: 0.1em;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Newsletter Section */
        .newsletter {
            background: var(--card);
            border: 1px solid var(--glass-border);
            border-radius: 32px;
            padding: 4rem;
            margin-top: 8rem;
            text-align: center;
            backdrop-filter: var(--blur-lg);
            position: relative;
            overflow: hidden;
        }

        .newsletter::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--gradient-primary);
            opacity: 0.05;
            z-index: -1;
        }

        .newsletter h3 {
            font-size: 2.5rem;
            font-weight: 200;
            margin-bottom: 1.5rem;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .newsletter p {
            color: var(--secondary);
            max-width: 600px;
            margin: 0 auto 3rem;
            font-size: 1.1rem;
            line-height: 1.7;
        }

        .newsletter-form {
            display: flex;
            max-width: 500px;
            margin: 0 auto;
            gap: 1rem;
        }

        .newsletter-input {
            flex: 1;
            padding: 1rem 1.5rem;
            border: 2px solid var(--glass-border);
            border-radius: 50px;
            font-size: 1rem;
            background: var(--glass-bg);
            color: var(--primary);
            backdrop-filter: var(--blur-sm);
            transition: all 0.3s ease;
        }

        .newsletter-input:focus {
            outline: none;
            border-color: var(--accent);
        }

        .newsletter-button {
            padding: 1rem 2rem;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
            position: relative;
            overflow: hidden;
            white-space: nowrap;
        }

        .newsletter-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--accent-secondary);
            transform: translateX(-100%);
            transition: transform 0.4s cubic-bezier(0.23, 1, 0.32, 1);
            z-index: -1;
        }

        .newsletter-button:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .newsletter-button:hover::before {
            transform: translateX(0);
        }

        /* Ultra Modern Footer */
        .footer {
            background: linear-gradient(135deg, var(--surface) 0%, var(--bg) 100%);
            border-top: 1px solid var(--glass-border);
            padding: 8rem 2rem 3rem;
            margin-top: 8rem;
            position: relative;
            overflow: hidden;
        }

        .footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--gradient-primary);
            opacity: 0.02;
            z-index: -1;
        }

        .footer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 4rem;
            max-width: 1600px;
            margin: 0 auto;
        }

        .footer-brand {
            grid-column: span 2;
        }

        .footer-logo {
            font-size: 2rem;
            font-weight: 200;
            margin-bottom: 1.5rem;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .footer-description {
            font-size: 1rem;
            color: var(--secondary);
            margin-bottom: 2rem;
            line-height: 1.7;
            max-width: 400px;
        }

        .footer-social {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .social-link {
            width: 48px;
            height: 48px;
            border: 1px solid var(--glass-border);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--secondary);
            text-decoration: none;
            transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
            backdrop-filter: var(--blur-sm);
        }

        .social-link:hover {
            transform: translateY(-4px);
            border-color: var(--accent);
            color: var(--accent);
            box-shadow: var(--shadow);
        }

        .footer-section h4 {
            font-size: 1rem;
            font-weight: 400;
            margin-bottom: 2rem;
            color: var(--primary);
            position: relative;
        }

        .footer-section h4::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 0;
            width: 30px;
            height: 2px;
            background: var(--accent);
        }

        .footer-links {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .footer-links a {
            color: var(--secondary);
            text-decoration: none;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .footer-links a:hover {
            color: var(--accent);
            transform: translateX(4px);
        }

        .footer-links a::before {
            content: '';
            width: 4px;
            height: 4px;
            border-radius: 50%;
            background: var(--accent);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .footer-links a:hover::before {
            opacity: 1;
        }

        .footer-bottom {
            text-align: center;
            padding-top: 4rem;
            margin-top: 4rem;
            border-top: 1px solid var(--glass-border);
        }

        .footer-bottom p {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: var(--secondary);
            letter-spacing: 0.1em;
        }

        /* Responsive Design */
        @media (max-width: 1400px) {
            .content-section {
                padding: 8rem 2rem;
            }
        }

        @media (max-width: 1200px) {
            .footer-brand {
                grid-column: span 1;
            }

            .featured-article {
                gap: 3rem;
            }

            .featured-content {
                padding-left: 1rem;
            }
        }

        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .mobile-menu-btn {
                display: block;
            }

            .header {
                padding: 1rem;
            }

            .content-section {
                padding: 6rem 1rem;
            }

            .news-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .news-card {
                padding: 2rem;
            }

            .featured-article {
                grid-template-columns: 1fr;
                gap: 3rem;
            }

            .featured-content {
                padding-left: 0;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 1.5rem;
            }

            .newsletter {
                padding: 3rem 2rem;
                margin-top: 6rem;
            }

            .newsletter-form {
                flex-direction: column;
                gap: 1rem;
            }

            .hero-cta {
                flex-direction: column;
                gap: 1rem;
                align-items: stretch;
                max-width: 300px;
                margin: 0 auto;
            }

            .cta-primary, .cta-secondary {
                width: 100%;
                text-align: center;
            }

            .hero {
                min-height: 100vh;
                padding: 0 1rem;
            }

            .section-header {
                margin-bottom: 4rem;
            }

            .footer-grid {
                gap: 3rem;
            }

            .footer {
                padding: 6rem 2rem 3rem;
            }
        }

        @media (max-width: 480px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }

            .newsletter {
                padding: 2rem 1rem;
            }

            .news-card {
                padding: 1.5rem;
            }

            .stat-card {
                padding: 2rem 1rem;
            }

            .stat-number {
                font-size: 3rem;
            }
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--surface);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--accent);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--accent-secondary);
        }

        /* Selection */
        ::selection {
            background: var(--accent);
            color: white;
        }

        /* Focus styles */
        button:focus,
        input:focus,
        a:focus {
            outline: 2px solid var(--accent);
            outline-offset: 2px;
        }

        /* Keyboard navigation styles */
        .keyboard-navigation button:focus,
        .keyboard-navigation input:focus,
        .keyboard-navigation a:focus {
            outline: 2px solid var(--accent);
            outline-offset: 2px;
        }

        /* Improved accessibility */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }

            .animated-bg {
                animation: none;
            }

            .orb {
                animation: none;
            }

            .scroll-indicator {
                animation: none;
            }
        }

        /* High contrast mode support */
        @media (prefers-contrast: high) {
            :root {
                --glass-bg: rgba(255, 255, 255, 0.2);
                --glass-border: rgba(255, 255, 255, 0.3);
            }
        }

        /* Loading state improvements */
        .news-card.loading {
            opacity: 0.5;
            pointer-events: none;
        }

        .news-card.loaded {
            opacity: 1;
            pointer-events: all;
        }

        /* Error states */
        .error-message {
            text-align: center;
            padding: 4rem 2rem;
            color: var(--accent-secondary);
            font-family: 'JetBrains Mono', monospace;
        }

        /* Success states */
        .success-message {
            color: var(--accent-tertiary);
            font-size: 0.875rem;
            margin-top: 1rem;
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.3s ease;
        }

        .success-message.show {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>
<body data-theme="dark">
<!-- Ultra Modern Cursor -->
<div class="cursor" id="cursor"></div>
<div class="cursor-trail" id="cursorTrail"></div>

<!-- Animated Background -->
<div class="animated-bg"></div>

<!-- Floating Orbs -->
<div class="floating-orbs">
    <div class="orb"></div>
    <div class="orb"></div>
    <div class="orb"></div>
</div>

<!-- Next-Gen Preloader -->
<div class="preloader" id="preloader">
    <div id="preloader-3d"></div>
    <div class="preloader-text">Initializing Experience</div>
    <div class="loading-progress">
        <div class="loading-bar" id="loadingBar"></div>
    </div>
</div>

<!-- Glassmorphism Header -->
<header class="header" id="header">
    <nav class="nav">
        <div class="logo">Apple Insights</div>
        <ul class="nav-links">
            <li><a href="#news">News</a></li>
            <li><a href="#insights">Insights</a></li>
            <li><a href="#stats">Analytics</a></li>
            <li><a href="#about">About</a></li>
        </ul>
        <div style="display: flex; align-items: center; gap: 1rem;">
            <button class="theme-toggle" id="themeToggle">
                <span>🌙</span>
                <span>Theme</span>
            </button>
            <button class="mobile-menu-btn" id="mobileMenuBtn">☰</button>
        </div>
    </nav>
</header>

<!-- Hero Section -->
<section class="hero">
    <div class="hero-content">
        <h1>Next-Gen<br>Apple Insights</h1>
        <div class="hero-subtitle">Redefining Tech Analysis</div>
        <p class="hero-description">
            Experience the future of Apple news and analysis with cutting-edge design,
            real-time insights, and immersive storytelling that goes beyond traditional tech journalism.
        </p>
        <div class="hero-cta">
            <a href="#news" class="cta-primary">Explore Stories</a>
            <a href="#about" class="cta-secondary">Learn More</a>
        </div>
    </div>
    <div class="scroll-indicator"></div>
</section>

<!-- Latest News Section -->
<section class="content-section" id="news">
    <div class="section-header">
        <h2 class="section-title">Breaking News</h2>
        <p class="section-subtitle">
            Stay ahead with the latest Apple developments, curated with precision
            and presented through next-generation web experiences.
        </p>
    </div>

    <div id="featured-container"></div>

    <div id="news-container">
        <div class="loading">
            <div class="loading-spinner"></div>
            <div class="loading-text">Loading Latest Stories...</div>
        </div>
    </div>
</section>

<!-- Insights Section -->
<section class="content-section" id="insights">
    <div class="section-header">
        <h2 class="section-title">Expert Analysis</h2>
        <p class="section-subtitle">
            Deep-dive analysis on Apple's strategic moves, technological innovations,
            and market positioning from industry experts.
        </p>
    </div>

    <div class="news-grid">
        <div class="news-card">
            <div class="news-meta">
                <span>Premium Analysis</span>
                <span>•</span>
                <span>July 2025</span>
            </div>
            <h3>Apple Silicon Revolution: The M5 Era</h3>
            <p>Exploring how Apple's next-generation M5 chips are set to redefine computing performance with revolutionary neural processing capabilities and unprecedented energy efficiency.</p>
            <a href="#" class="read-more">Deep Dive</a>
        </div>

        <div class="news-card">
            <div class="news-meta">
                <span>Market Intelligence</span>
                <span>•</span>
                <span>June 2025</span>
            </div>
            <h3>Vision Pro: Spatial Computing Reality</h3>
            <p>Analyzing Apple's spatial computing strategy and how Vision Pro is creating new paradigms for human-computer interaction in enterprise and consumer markets.</p>
            <a href="#" class="read-more">Explore</a>
        </div>

        <div class="news-card">
            <div class="news-meta">
                <span>Sustainability Report</span>
                <span>•</span>
                <span>May 2025</span>
            </div>
            <h3>Carbon Neutral by Design</h3>
            <p>How Apple's innovative approach to sustainable manufacturing and circular economy principles are setting new industry standards for environmental responsibility.</p>
            <a href="#" class="read-more">Read Study</a>
        </div>
    </div>
</section>

<!-- Analytics Section -->
<section class="content-section" id="stats">
    <div class="section-header">
        <h2 class="section-title">Live Analytics</h2>
        <p class="section-subtitle">
            Real-time data and insights that define Apple's market presence
            and technological impact across global markets.
        </p>
    </div>

    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-number" id="stat1">0</div>
            <div class="stat-label">Active Devices Worldwide</div>
        </div>
        <div class="stat-card">
            <div class="stat-number" id="stat2">0</div>
            <div class="stat-label">App Store Applications</div>
        </div>
        <div class="stat-card">
            <div class="stat-number" id="stat3">0</div>
            <div class="stat-label">Global Retail Locations</div>
        </div>
        <div class="stat-card">
            <div class="stat-number" id="stat4">0</div>
            <div class="stat-label">Countries & Regions</div>
        </div>
    </div>
</section>

<!-- Newsletter -->
<div class="content-section">
    <div class="newsletter">
        <h3>Stay Connected</h3>
        <p>
            Join our community of tech enthusiasts and industry professionals.
            Get exclusive insights, early access to reports, and personalized analysis
            delivered directly to your inbox.
        </p>
        <form class="newsletter-form" id="newsletterForm">
            <input type="email" class="newsletter-input" placeholder="Enter your email address" required>
            <button type="submit" class="newsletter-button">Subscribe</button>
        </form>
        <div class="success-message" id="newsletterSuccess">Thank you for subscribing!</div>
    </div>
</div>

<!-- About Section -->
<section class="content-section" id="about">
    <div class="section-header">
        <h2 class="section-title">About Us</h2>
        <p class="section-subtitle">
            We're redefining how technology news is experienced through innovative
            design, data-driven insights, and immersive storytelling.
        </p>
    </div>

    <div class="news-card" style="max-width: 900px; margin: 0 auto; text-align: center;">
        <h3>Next-Generation Tech Journalism</h3>
        <p>
            Apple Insights represents the future of technology media. We combine cutting-edge web technologies
            with expert analysis to create experiences that don't just inform, but inspire. Our team of designers,
            developers, and analysts work together to push the boundaries of digital storytelling.
        </p>
        <br>
        <p>
            Built with modern web technologies, our platform showcases what's possible when design meets functionality.
            Every interaction is crafted to provide value while delivering an experience that feels premium and forward-thinking.
        </p>
        <br>
        <p style="font-size: 0.9rem; opacity: 0.8;">
            <em>Apple Insights is an independent publication. All trademarks are property of their respective owners.</em>
        </p>
    </div>
</section>

<!-- Ultra Modern Footer -->
<footer class="footer">
    <div class="footer-grid">
        <div class="footer-brand">
            <div class="footer-logo">Apple Insights</div>
            <p class="footer-description">
                Next-generation technology analysis and insights platform.
                Redefining how we understand and interact with Apple's ecosystem
                through innovative design and expert commentary.
            </p>
            <div class="footer-social">
                <a href="#" class="social-link" aria-label="Twitter">𝕏</a>
                <a href="#" class="social-link" aria-label="LinkedIn">in</a>
                <a href="#" class="social-link" aria-label="GitHub">gh</a>
                <a href="#" class="social-link" aria-label="Discord">dc</a>
            </div>
        </div>

        <div class="footer-section">
            <h4>Content</h4>
            <ul class="footer-links">
                <li><a href="#news">Latest News</a></li>
                <li><a href="#insights">Expert Analysis</a></li>
                <li><a href="#stats">Live Analytics</a></li>
                <li><a href="#">Premium Reports</a></li>
            </ul>
        </div>

        <div class="footer-section">
            <h4>Resources</h4>
            <ul class="footer-links">
                <li><a href="#">Documentation</a></li>
                <li><a href="#">API Access</a></li>
                <li><a href="#">Data Exports</a></li>
                <li><a href="#">Research Hub</a></li>
            </ul>
        </div>

        <div class="footer-section">
            <h4>Connect</h4>
            <ul class="footer-links">
                <li><a href="#">Contact Team</a></li>
                <li><a href="#">Media Kit</a></li>
                <li><a href="#">Partnerships</a></li>
                <li><a href="#">Careers</a></li>
            </ul>
        </div>
    </div>

    <div class="footer-bottom">
        <p>&copy; 2025 Apple Insights. Built with next-gen web technologies.</p>
    </div>
</footer>

<script>
    class ModernAppleBlog {
        constructor() {
            this.currentTheme = 'dark'; // Store theme in memory instead of localStorage
            this.initPreloader();
            this.initCursor();
            this.initTheme();
            this.initAnimations();
            this.loadNews();
            this.initStats();
            this.initNewsletter();
            this.init3DPreloader();
            this.initMobileMenu();
            this.initErrorHandling();
        }

        init3DPreloader() {
            const container = document.getElementById('preloader-3d');
            if (!container) return;

            try {
                // Scene setup
                const scene = new THREE.Scene();
                const camera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);
                const renderer = new THREE.WebGLRenderer({
                    alpha: true,
                    antialias: true,
                    powerPreference: "high-performance"
                });
                renderer.setSize(150, 150);
                renderer.setClearColor(0x000000, 0);
                container.appendChild(renderer.domElement);

                // Create modern geometric logo
                const geometry = new THREE.IcosahedronGeometry(1, 1);
                const material = new THREE.MeshPhongMaterial({
                    color: 0x0066ff,
                    specular: 0x111111,
                    shininess: 100,
                    transparent: true,
                    opacity: 0.9,
                    wireframe: false
                });

                const logoMesh = new THREE.Mesh(geometry, material);
                scene.add(logoMesh);

                // Add wireframe version
                const wireframeMaterial = new THREE.MeshBasicMaterial({
                    color: 0x0066ff,
                    wireframe: true,
                    transparent: true,
                    opacity: 0.3
                });
                const wireframeMesh = new THREE.Mesh(geometry, wireframeMaterial);
                wireframeMesh.scale.set(1.1, 1.1, 1.1);
                scene.add(wireframeMesh);

                // Lighting
                const ambientLight = new THREE.AmbientLight(0x404040, 0.6);
                scene.add(ambientLight);

                const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
                directionalLight.position.set(1, 1, 1);
                scene.add(directionalLight);

                const directionalLight2 = new THREE.DirectionalLight(0x0066ff, 0.5);
                directionalLight2.position.set(-1, -1, -1);
                scene.add(directionalLight2);

                camera.position.z = 3;

                // Animation loop
                let animationId;
                const animate = () => {
                    animationId = requestAnimationFrame(animate);

                    logoMesh.rotation.x += 0.01;
                    logoMesh.rotation.y += 0.015;
                    wireframeMesh.rotation.x -= 0.005;
                    wireframeMesh.rotation.y -= 0.01;

                    renderer.render(scene, camera);
                };

                animate();

                // Cleanup on preloader hide
                setTimeout(() => {
                    if (animationId) {
                        cancelAnimationFrame(animationId);
                    }
                    if (container && container.parentNode) {
                        container.innerHTML = '';
                    }
                }, 4000);

            } catch (error) {
                console.warn('3D preloader could not be initialized:', error);
                // Fallback to simple loader
                container.innerHTML = '<div style="width: 150px; height: 150px; border: 2px solid #0066ff; border-top: 2px solid transparent; border-radius: 50%; animation: spin 1s linear infinite;"></div>';
            }
        }

        initPreloader() {
            const loadingBar = document.getElementById('loadingBar');
            const preloaderText = document.querySelector('.preloader-text');

            // Simulate loading progress with more realistic progression
            let progress = 0;
            const interval = setInterval(() => {
                const increment = Math.random() * 12 + 3; // More consistent progress
                progress = Math.min(progress + increment, 100);

                if (loadingBar) {
                    loadingBar.style.width = progress + '%';
                }

                if (progress >= 100) {
                    clearInterval(interval);
                    setTimeout(() => {
                        this.hidePreloader();
                    }, 600);
                }
            }, 120);

            // Animate preloader text
            if (typeof gsap !== 'undefined') {
                gsap.to(preloaderText, {
                    opacity: 1,
                    y: 0,
                    duration: 1,
                    delay: 0.5,
                    ease: 'power2.out'
                });
            } else {
                // Fallback animation
                setTimeout(() => {
                    preloaderText.style.opacity = '1';
                    preloaderText.style.transform = 'translateY(0)';
                }, 500);
            }
        }

        hidePreloader() {
            const preloader = document.getElementById('preloader');
            if (typeof gsap !== 'undefined') {
                gsap.to(preloader, {
                    opacity: 0,
                    duration: 1,
                    ease: 'power2.inOut',
                    onComplete: () => {
                        preloader.style.display = 'none';
                        this.startMainAnimations();
                    }
                });
            } else {
                // Fallback
                preloader.style.transition = 'opacity 1s ease';
                preloader.style.opacity = '0';
                setTimeout(() => {
                    preloader.style.display = 'none';
                    this.startMainAnimations();
                }, 1000);
            }
        }

        startMainAnimations() {
            // Header reveal
            setTimeout(() => {
                const header = document.getElementById('header');
                if (header) {
                    header.classList.add('visible');
                }
            }, 200);

            // Hero animations with fallback
            if (typeof gsap !== 'undefined') {
                const tl = gsap.timeline();
                tl.to('.hero-content h1', {
                    opacity: 1,
                    y: 0,
                    duration: 1.5,
                    ease: 'power3.out'
                })
                    .to('.hero-subtitle', {
                        opacity: 1,
                        y: 0,
                        duration: 1.2,
                        ease: 'power3.out'
                    }, '-=1.2')
                    .to('.hero-description', {
                        opacity: 1,
                        y: 0,
                        duration: 1,
                        ease: 'power3.out'
                    }, '-=0.8')
                    .to('.hero-cta', {
                        opacity: 1,
                        y: 0,
                        duration: 1,
                        ease: 'power3.out'
                    }, '-=0.6')
                    .to('.scroll-indicator', {
                        opacity: 1,
                        duration: 0.8,
                        ease: 'power2.out'
                    }, '-=0.4');
            } else {
                // Fallback animations
                const elements = ['.hero-content h1', '.hero-subtitle', '.hero-description', '.hero-cta', '.scroll-indicator'];
                elements.forEach((selector, index) => {
                    setTimeout(() => {
                        const el = document.querySelector(selector);
                        if (el) {
                            el.style.transition = 'all 1s ease';
                            el.style.opacity = '1';
                            el.style.transform = 'translateY(0)';
                        }
                    }, index * 200);
                });
            }
        }

        initCursor() {
            // Only initialize cursor on desktop
            if (window.innerWidth <= 768) return;

            const cursor = document.getElementById('cursor');
            const cursorTrail = document.getElementById('cursorTrail');

            if (!cursor || !cursorTrail) return;

            let mouseX = 0, mouseY = 0;
            let trailX = 0, trailY = 0;

            document.addEventListener('mousemove', (e) => {
                mouseX = e.clientX;
                mouseY = e.clientY;

                cursor.style.left = mouseX + 'px';
                cursor.style.top = mouseY + 'px';
            });

            // Smooth trail animation
            const animateTrail = () => {
                trailX += (mouseX - trailX) * 0.1;
                trailY += (mouseY - trailY) * 0.1;

                cursorTrail.style.left = trailX + 'px';
                cursorTrail.style.top = trailY + 'px';

                requestAnimationFrame(animateTrail);
            };
            animateTrail();

            // Hover effects
            const hoverElements = document.querySelectorAll('a, button, .news-card, .stat-card');
            hoverElements.forEach(el => {
                el.addEventListener('mouseenter', () => {
                    cursor.classList.add('active');
                    cursorTrail.classList.add('active');
                });
                el.addEventListener('mouseleave', () => {
                    cursor.classList.remove('active');
                    cursorTrail.classList.remove('active');
                });
            });
        }

        initTheme() {
            const themeToggle = document.getElementById('themeToggle');
            const body = document.body;

            // Set initial theme
            body.setAttribute('data-theme', this.currentTheme);
            this.updateThemeToggle(this.currentTheme);

            themeToggle.addEventListener('click', () => {
                this.currentTheme = this.currentTheme === 'dark' ? 'light' : 'dark';
                body.setAttribute('data-theme', this.currentTheme);
                this.updateThemeToggle(this.currentTheme);
            });
        }

        updateThemeToggle(theme) {
            const themeToggle = document.getElementById('themeToggle');
            const icon = themeToggle.querySelector('span:first-child');

            if (theme === 'dark') {
                icon.textContent = '🌙';
            } else {
                icon.textContent = '☀️';
            }
        }

        initMobileMenu() {
            const mobileMenuBtn = document.getElementById('mobileMenuBtn');
            const navLinks = document.querySelector('.nav-links');

            if (mobileMenuBtn && navLinks) {
                mobileMenuBtn.addEventListener('click', () => {
                    navLinks.style.display = navLinks.style.display === 'flex' ? 'none' : 'flex';
                    navLinks.style.position = 'absolute';
                    navLinks.style.top = '100%';
                    navLinks.style.left = '0';
                    navLinks.style.right = '0';
                    navLinks.style.background = 'var(--card)';
                    navLinks.style.flexDirection = 'column';
                    navLinks.style.padding = '2rem';
                    navLinks.style.borderRadius = '0 0 24px 24px';
                    navLinks.style.backdropFilter = 'var(--blur-lg)';
                    navLinks.style.border = '1px solid var(--glass-border)';
                    navLinks.style.borderTop = 'none';
                });
            }
        }

        initAnimations() {
            if (typeof gsap === 'undefined') {
                // Fallback for when GSAP is not available
                this.initFallbackAnimations();
                return;
            }

            // Section scroll animations
            gsap.utils.toArray('.content-section').forEach((section, i) => {
                ScrollTrigger.create({
                    trigger: section,
                    start: 'top 80%',
                    onEnter: () => {
                        gsap.to(section, {
                            opacity: 1,
                            y: 0,
                            duration: 1,
                            ease: 'power3.out'
                        });
                    }
                });
            });

            // Cards animation
            gsap.utils.toArray('.news-card, .stat-card').forEach((card, i) => {
                ScrollTrigger.create({
                    trigger: card,
                    start: 'top 85%',
                    onEnter: () => {
                        gsap.to(card, {
                            opacity: 1,
                            y: 0,
                            duration: 0.8,
                            delay: i * 0.1,
                            ease: 'power3.out'
                        });
                    }
                });
            });
        }

        initFallbackAnimations() {
            // Intersection Observer fallback
            if ('IntersectionObserver' in window) {
                const observerOptions = {
                    root: null,
                    rootMargin: '0px',
                    threshold: 0.1
                };

                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.style.transition = 'all 0.8s ease';
                            entry.target.style.opacity = '1';
                            entry.target.style.transform = 'translateY(0)';
                        }
                    });
                }, observerOptions);

                // Observe all sections and cards
                document.querySelectorAll('.content-section, .news-card, .stat-card').forEach(el => {
                    observer.observe(el);
                });
            }
        }

        initStats() {
            const stats = [
                { id: 'stat1', target: 2.1, suffix: 'B+' },
                { id: 'stat2', target: 2.8, suffix: 'M+' },
                { id: 'stat3', target: 530, suffix: '+' },
                { id: 'stat4', target: 180, suffix: '+' }
            ];

            const animateStats = () => {
                stats.forEach(stat => {
                    const element = document.getElementById(stat.id);
                    if (!element) return;

                    if (typeof gsap !== 'undefined') {
                        gsap.to({ value: 0 }, {
                            value: stat.target,
                            duration: 2.5,
                            ease: 'power2.out',
                            onUpdate: function() {
                                const current = Math.floor(this.targets()[0].value);
                                element.textContent = current + stat.suffix;
                            }
                        });
                    } else {
                        // Fallback counter animation
                        let current = 0;
                        const increment = stat.target / 100;
                        const timer = setInterval(() => {
                            current += increment;
                            if (current >= stat.target) {
                                current = stat.target;
                                clearInterval(timer);
                            }
                            element.textContent = Math.floor(current) + stat.suffix;
                        }, 25);
                    }
                });
            };

            // Use Intersection Observer to trigger stats animation
            if ('IntersectionObserver' in window) {
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            animateStats();
                            observer.unobserve(entry.target);
                        }
                    });
                }, { threshold: 0.5 });

                const statsSection = document.getElementById('stats');
                if (statsSection) {
                    observer.observe(statsSection);
                }
            } else {
                // Fallback - trigger on scroll
                window.addEventListener('scroll', () => {
                    const statsSection = document.getElementById('stats');
                    if (statsSection) {
                        const rect = statsSection.getBoundingClientRect();
                        if (rect.top < window.innerHeight && rect.bottom > 0) {
                            animateStats();
                            window.removeEventListener('scroll', arguments.callee);
                        }
                    }
                });
            }
        }

        initNewsletter() {
            const form = document.getElementById('newsletterForm');
            const successMessage = document.getElementById('newsletterSuccess');
            if (!form) return;

            form.addEventListener('submit', (e) => {
                e.preventDefault();
                const input = form.querySelector('.newsletter-input');
                const button = form.querySelector('.newsletter-button');

                // Validate email
                const email = input.value.trim();
                if (!this.isValidEmail(email)) {
                    this.showNotification('Please enter a valid email address', 'error');
                    return;
                }

                // Show loading state
                const originalText = button.textContent;
                button.textContent = 'Subscribing...';
                button.disabled = true;

                // Simulate API call
                setTimeout(() => {
                    button.textContent = 'Subscribed!';
                    button.style.background = 'var(--accent-tertiary)';

                    // Show success message
                    if (successMessage) {
                        successMessage.classList.add('show');
                    }

                    setTimeout(() => {
                        button.textContent = originalText;
                        button.style.background = 'var(--accent)';
                        button.disabled = false;
                        input.value = '';

                        if (successMessage) {
                            successMessage.classList.remove('show');
                        }
                    }, 3000);
                }, 1000);
            });
        }

        isValidEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }

        showNotification(message, type = 'info') {
            // Create notification element
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                right: 20px;
                background: var(--card);
                border: 1px solid var(--glass-border);
                border-radius: 12px;
                padding: 1rem 1.5rem;
                color: var(--primary);
                font-size: 0.875rem;
                z-index: 10000;
                backdrop-filter: var(--blur-md);
                box-shadow: var(--shadow);
                transform: translateX(100%);
                transition: transform 0.3s ease;
            `;

            if (type === 'error') {
                notification.style.borderColor = 'var(--accent-secondary)';
                notification.style.color = 'var(--accent-secondary)';
            }

            notification.textContent = message;
            document.body.appendChild(notification);

            // Animate in
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);

            // Remove after delay
            setTimeout(() => {
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        initErrorHandling() {
            // Global error handler
            window.addEventListener('error', (e) => {
                console.error('Global error:', e.error);
                // Don't show error notifications to users, just log them
            });

            // Unhandled promise rejection handler
            window.addEventListener('unhandledrejection', (e) => {
                console.error('Unhandled promise rejection:', e.reason);
                e.preventDefault();
            });
        }

        async loadNews() {
            try {
                // Always load demo content since we can't use real APIs
                this.loadDemoNews();
            } catch (error) {
                console.error('Error loading news:', error);
                this.showErrorState();
            }
        }

        showErrorState() {
            const newsContainer = document.getElementById('news-container');
            if (newsContainer) {
                newsContainer.innerHTML = `
                    <div class="error-message">
                        <p>Unable to load news at this time.</p>
                        <button onclick="location.reload()" style="margin-top: 1rem; padding: 0.5rem 1rem; background: var(--accent); color: white; border: none; border-radius: 8px; cursor: pointer;">
                            Retry
                        </button>
                    </div>
                `;
            }
        }

        loadDemoNews() {
            const demoArticles = [
                {
                    title: "Apple Intelligence: The AI Revolution",
                    description: "Apple's groundbreaking AI integration across all devices promises to redefine personal computing with unprecedented privacy-first intelligence capabilities.",
                    publishedAt: "2025-07-23T09:00:00Z",
                    source: { name: "Apple Insider" },
                    url: "#",
                    urlToImage: "https://images.unsplash.com/photo-1677442136019-21780ecad995?w=800&h=500&fit=crop"
                },
                {
                    title: "Vision Pro 2: Spatial Computing Evolution",
                    description: "Second-generation Vision Pro introduces lighter design, extended battery life, and revolutionary eye-tracking precision for professional workflows.",
                    publishedAt: "2025-07-22T14:30:00Z",
                    source: { name: "TechCrunch" },
                    url: "#",
                    urlToImage: "https://images.unsplash.com/photo-1593508512255-86ab42a8e620?w=800&h=500&fit=crop"
                },
                {
                    title: "M5 Ultra: Performance Redefined",
                    description: "Apple's most powerful chip yet delivers breakthrough performance for professionals with neural processing capabilities that set new industry benchmarks.",
                    publishedAt: "2025-07-21T11:15:00Z",
                    source: { name: "MacRumors" },
                    url: "#",
                    urlToImage: "https://images.unsplash.com/photo-1518770660439-4636190af475?w=800&h=500&fit=crop"
                },
                {
                    title: "Sustainable Innovation: Carbon Neutral 2025",
                    description: "Apple achieves complete carbon neutrality across all operations and products, setting new environmental standards for the technology industry.",
                    publishedAt: "2025-07-20T16:45:00Z",
                    source: { name: "Apple Newsroom" },
                    url: "#",
                    urlToImage: "https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=800&h=500&fit=crop"
                },
                {
                    title: "App Store Evolution: Developer Renaissance",
                    description: "New App Store features empower developers with advanced analytics, AI-powered discovery, and enhanced monetization opportunities.",
                    publishedAt: "2025-07-19T13:20:00Z",
                    source: { name: "9to5Mac" },
                    url: "#",
                    urlToImage: "https://images.unsplash.com/photo-1512941937669-90a1b58e7e9c?w=800&h=500&fit=crop"
                },
                {
                    title: "HomePod Studio: Premium Audio Redefined",
                    description: "Apple's flagship smart speaker introduces spatial audio mastering and professional-grade sound engineering for audiophiles.",
                    publishedAt: "2025-07-18T10:30:00Z",
                    source: { name: "The Verge" },
                    url: "#",
                    urlToImage: "https://images.unsplash.com/photo-1545454675-3531b543be5d?w=800&h=500&fit=crop"
                }
            ];

            this.displayNews(demoArticles);
        }

        displayNews(articles) {
            const newsContainer = document.getElementById('news-container');
            const featuredContainer = document.getElementById('featured-container');

            if (!articles || articles.length === 0) {
                newsContainer.innerHTML = '<div class="loading"><div class="loading-text">No articles available</div></div>';
                return;
            }

            // Featured article (first one)
            const featured = articles[0];
            const featuredDate = this.formatDate(featured.publishedAt);

            if (featuredContainer) {
                featuredContainer.innerHTML = `
                    <article class="featured-article">
                        <div class="featured-image">
                            <img src="${featured.urlToImage}"
                                 alt="${featured.title}"
                                 loading="lazy"
                                 onerror="this.src='https://images.unsplash.com/photo-1677442136019-21780ecad995?w=800&h=500&fit=crop'">
                        </div>
                        <div class="featured-content">
                            <div class="news-meta">
                                <span>Featured Story</span>
                                <span>•</span>
                                <span>${featured.source?.name || 'Apple News'}</span>
                                <span>•</span>
                                <span>${featuredDate}</span>
                            </div>
                            <h3>${featured.title}</h3>
                            <p>${featured.description}</p>
                            <a href="${featured.url}" class="read-more">Read Featured Story</a>
                        </div>
                    </article>
                `;
            }

            // Regular articles
            const regularArticles = articles.slice(1);
            const newsHTML = regularArticles.map((article, index) => {
                const publishedDate = this.formatDate(article.publishedAt);
                return `
                    <div class="news-card" style="opacity: 0; transform: translateY(30px);">
                        <div class="news-meta">
                            <span>${article.source?.name || 'Apple News'}</span>
                            <span>•</span>
                            <span>${publishedDate}</span>
                        </div>
                        <h3>${article.title}</h3>
                        <p>${article.description}</p>
                        <a href="${article.url}" class="read-more">Read Article</a>
                    </div>
                `;
            }).join('');

            if (newsContainer) {
                newsContainer.innerHTML = `<div class="news-grid">${newsHTML}</div>`;
            }

            // Animate featured article
            if (typeof gsap !== 'undefined') {
                gsap.to('.featured-article', {
                    opacity: 1,
                    y: 0,
                    duration: 1.2,
                    delay: 0.3,
                    ease: 'power3.out'
                });

                // Animate news cards with stagger
                gsap.utils.toArray('.news-grid .news-card').forEach((card, i) => {
                    ScrollTrigger.create({
                        trigger: card,
                        start: 'top 85%',
                        onEnter: () => {
                            gsap.to(card, {
                                opacity: 1,
                                y: 0,
                                duration: 0.8,
                                delay: i * 0.1,
                                ease: 'power3.out'
                            });
                        }
                    });
                });
            } else {
                // Fallback animations
                setTimeout(() => {
                    const featuredArticle = document.querySelector('.featured-article');
                    if (featuredArticle) {
                        featuredArticle.style.transition = 'all 1.2s ease';
                        featuredArticle.style.opacity = '1';
                        featuredArticle.style.transform = 'translateY(0)';
                    }

                    document.querySelectorAll('.news-grid .news-card').forEach((card, i) => {
                        setTimeout(() => {
                            card.style.transition = 'all 0.8s ease';
                            card.style.opacity = '1';
                            card.style.transform = 'translateY(0)';
                        }, i * 100);
                    });
                }, 300);
            }
        }

        formatDate(dateString) {
            try {
                const date = new Date(dateString);
                const now = new Date();
                const diffTime = Math.abs(now - date);
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

                if (diffDays === 1) return 'Yesterday';
                if (diffDays < 7) return `${diffDays} days ago`;

                return date.toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric'
                });
            } catch (error) {
                return 'Recently';
            }
        }
    }

    // Initialize when DOM is loaded with better error handling
    function initializeApp() {
        try {
            // Add initial styles to prevent flash
            document.body.style.opacity = '0';
            document.body.style.transition = 'opacity 0.5s ease';

            // Fade in body after short delay
            setTimeout(() => {
                document.body.style.opacity = '1';
            }, 100);

            // Initialize the application
            new ModernAppleBlog();
        } catch (error) {
            console.error('Failed to initialize app:', error);
            // Show basic fallback
            document.body.style.opacity = '1';
            document.getElementById('preloader').style.display = 'none';
        }
    }

    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initializeApp);
    } else {
        initializeApp();
    }

    // Add smooth scrolling for navigation links
    document.addEventListener('click', (e) => {
        if (e.target.matches('a[href^="#"]')) {
            e.preventDefault();
            const targetId = e.target.getAttribute('href');
            const targetElement = document.querySelector(targetId);

            if (targetElement) {
                const headerOffset = 100;
                const elementPosition = targetElement.getBoundingClientRect().top;
                const offsetPosition = elementPosition + window.pageYOffset - headerOffset;

                window.scrollTo({
                    top: offsetPosition,
                    behavior: 'smooth'
                });
            }
        }
    });

    // Add parallax effect to floating orbs (desktop only)
    if (window.innerWidth > 768) {
        let ticking = false;

        function updateParallax() {
            const scrolled = window.pageYOffset;
            const orbs = document.querySelectorAll('.orb');

            orbs.forEach((orb, index) => {
                const speed = 0.3 + (index * 0.1);
                const yPos = -(scrolled * speed);
                orb.style.transform = `translateY(${yPos}px)`;
            });

            ticking = false;
        }

        window.addEventListener('scroll', () => {
            if (!ticking) {
                requestAnimationFrame(updateParallax);
                ticking = true;
            }
        });
    }

    // Add window resize handler for responsive adjustments
    let resizeTimeout;
    window.addEventListener('resize', () => {
        clearTimeout(resizeTimeout);
        resizeTimeout = setTimeout(() => {
            // Update cursor visibility
            const cursor = document.getElementById('cursor');
            const cursorTrail = document.getElementById('cursorTrail');

            if (cursor && cursorTrail) {
                const showCursor = window.innerWidth > 768;
                cursor.style.display = showCursor ? 'block' : 'none';
                cursorTrail.style.display = showCursor ? 'block' : 'none';
            }

            // Close mobile menu on resize
            const navLinks = document.querySelector('.nav-links');
            if (navLinks && window.innerWidth > 768) {
                navLinks.style.display = '';
                navLinks.style.position = '';
                navLinks.style.top = '';
                navLinks.style.left = '';
                navLinks.style.right = '';
                navLinks.style.background = '';
                navLinks.style.flexDirection = '';
                navLinks.style.padding = '';
                navLinks.style.borderRadius = '';
                navLinks.style.backdropFilter = '';
                navLinks.style.border = '';
            }
        }, 250);
    });

    // Add keyboard navigation support
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Tab') {
            document.body.classList.add('keyboard-navigation');
        }

        // ESC key to close mobile menu
        if (e.key === 'Escape') {
            const navLinks = document.querySelector('.nav-links');
            if (navLinks && window.innerWidth <= 768) {
                navLinks.style.display = 'none';
            }
        }
    });

    document.addEventListener('mousedown', () => {
        document.body.classList.remove('keyboard-navigation');
    });

    // Performance monitoring
    if ('performance' in window) {
        window.addEventListener('load', () => {
            setTimeout(() => {
                try {
                    const perf = performance.getEntriesByType('navigation')[0];
                    const loadTime = Math.round(perf.loadEventEnd - perf.fetchStart);
                    console.log(`Page loaded in ${loadTime}ms`);
                } catch (error) {
                    console.log('Performance monitoring not available');
                }
            }, 0);
        });
    }

    // Add loading states for images
    document.addEventListener('DOMContentLoaded', () => {
        const images = document.querySelectorAll('img');
        images.forEach(img => {
            img.addEventListener('load', () => {
                img.style.opacity = '1';
            });

            img.addEventListener('error', () => {
                img.style.opacity = '0.5';
                console.warn('Failed to load image:', img.src);
            });
        });
    });
</script>
</body>
</html>
